<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emotional Wisdom Practice</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        const Heart = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
            </svg>
        );

        const Brain = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"></path>
                <path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"></path>
            </svg>
        );

        const Sparkles = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"></path>
                <path d="M5 3v4"></path>
                <path d="M19 17v4"></path>
                <path d="M3 5h4"></path>
                <path d="M17 19h4"></path>
            </svg>
        );

        const ArrowRight = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <line x1="5" y1="12" x2="19" y2="12"></line>
                <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
        );

        const RotateCcw = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="1 4 1 10 7 10"></polyline>
                <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path>
            </svg>
        );

        const EmotionalWisdomGame = () => {
            const [currentScenario, setCurrentScenario] = useState(0);
            const [gameStage, setGameStage] = useState('scenario');
            const [selectedEmotion, setSelectedEmotion] = useState(null);
            const [selectedPrinciples, setSelectedPrinciples] = useState([]);
            const [selectedResponse, setSelectedResponse] = useState(null);
            const [insights, setInsights] = useState([]);

            const scenarios = [
                {
                    id: 1,
                    title: "The Unsolicited Advice",
                    situation: "Your adult daughter calls and mentions she's tired from work. Before you can respond, she says, 'Mom, please don't tell me what to do. I just need to vent.' You feel a familiar tightness in your chest.",
                    emotions: [
                        { id: 'hurt', label: 'Hurt', desc: 'She doesn\'t want my help' },
                        { id: 'defensive', label: 'Defensive', desc: 'I was just trying to help' },
                        { id: 'worried', label: 'Worried', desc: 'Is she pushing me away?' },
                        { id: 'recognized', label: 'Recognized', desc: 'She knows me well' }
                    ],
                    principles: [
                        { id: 'love', label: 'I love her and want connection', type: 'core' },
                        { id: 'separate', label: 'She is separate from me', type: 'core' },
                        { id: 'capable', label: 'She is capable of solving her problems', type: 'core' },
                        { id: 'listening', label: 'Listening is a form of love', type: 'core' },
                        { id: 'control', label: 'I cannot control how she sees me', type: 'boundary' },
                        { id: 'worth', label: 'My worth isn\'t tied to being needed', type: 'boundary' }
                    ],
                    responses: [
                        { 
                            id: 'immediate', 
                            text: '"Well, I was just going to listen! I wasn\'t going to give advice."',
                            pattern: 'Defensive reaction - proving she\'s wrong about you',
                            outcome: 'Creates distance; focuses on being right rather than connection'
                        },
                        { 
                            id: 'withdrawn', 
                            text: '"Okay, sorry." (Then feeling hurt and pulling back)',
                            pattern: 'Protective withdrawal - avoiding the feeling',
                            outcome: 'Avoids conflict but builds resentment; she may sense your hurt'
                        },
                        { 
                            id: 'principled', 
                            text: '"I hear you. I\'m here to listen." (Noticing the urge to fix, letting it pass)',
                            pattern: 'First principles response - honoring both her needs and yours',
                            outcome: 'Opens space for real connection; you feel grounded in your choice'
                        },
                        { 
                            id: 'curious', 
                            text: '"Thanks for telling me what you need. That helps me be here for you better."',
                            pattern: 'First principles response - receiving her boundary as information',
                            outcome: 'Models healthy boundaries; strengthens trust and communication'
                        }
                    ]
                },
                {
                    id: 2,
                    title: "The Friend Who Cancels",
                    situation: "A close friend cancels lunch plans for the third time this month, texting 'Something came up, so sorry!' You notice yourself starting to compose a response immediately, fingers already moving.",
                    emotions: [
                        { id: 'abandoned', label: 'Abandoned', desc: 'She doesn\'t value our friendship' },
                        { id: 'angry', label: 'Angry', desc: 'This is disrespectful' },
                        { id: 'anxious', label: 'Anxious', desc: 'Did I do something wrong?' },
                        { id: 'curious', label: 'Curious', desc: 'I wonder what\'s happening for her' }
                    ],
                    principles: [
                        { id: 'valued', label: 'I deserve relationships where I feel valued', type: 'core' },
                        { id: 'story', label: 'I don\'t know her full story right now', type: 'core' },
                        { id: 'communicate', label: 'I can communicate my needs clearly', type: 'core' },
                        { id: 'patterns', label: 'Patterns matter more than single events', type: 'core' },
                        { id: 'respond', label: 'I can respond later; urgency is a feeling', type: 'boundary' },
                        { id: 'both', label: 'Both our needs can matter', type: 'boundary' }
                    ],
                    responses: [
                        { 
                            id: 'passive', 
                            text: '"No problem! üòä" (While feeling hurt inside)',
                            pattern: 'People-pleasing - suppressing your truth',
                            outcome: 'Builds internal resentment; she doesn\'t know this bothers you'
                        },
                        { 
                            id: 'aggressive', 
                            text: '"You\'ve cancelled three times. Clearly you don\'t want to see me."',
                            pattern: 'Immediate reaction - assuming the worst',
                            outcome: 'Puts her on defense; closes conversation before understanding'
                        },
                        { 
                            id: 'pause', 
                            text: '(Wait an hour before responding, let the initial reaction settle)',
                            pattern: 'First principles approach - creating space between feeling and action',
                            outcome: 'You respond from clarity rather than hurt; can assess what you truly want'
                        },
                        { 
                            id: 'honest', 
                            text: '"I understand things come up. I\'m noticing this is the third time, and I\'m feeling disconnected. Can we find a time that works better?"',
                            pattern: 'First principles response - honest and boundaried',
                            outcome: 'Opens real conversation; honors your feelings and invites problem-solving'
                        }
                    ]
                },
                {
                    id: 3,
                    title: "The Partner's Tone",
                    situation: "Your partner asks, 'Did you remember to call the plumber?' in a tone that feels critical. Your stomach clenches. You did forget, and you can feel yourself about to either apologize profusely or snap back defensively.",
                    emotions: [
                        { id: 'shame', label: 'Shame', desc: 'I messed up again' },
                        { id: 'defensive', label: 'Defensive', desc: 'Why is this my job?' },
                        { id: 'inadequate', label: 'Inadequate', desc: 'I can never do enough' },
                        { id: 'neutral', label: 'Neutral', desc: 'I forgot; that\'s just information' }
                    ],
                    principles: [
                        { id: 'mistake', label: 'Making mistakes doesn\'t define my worth', type: 'core' },
                        { id: 'tone', label: 'His tone might be about his stress, not about me', type: 'core' },
                        { id: 'fix', label: 'I can simply fix the mistake', type: 'core' },
                        { id: 'team', label: 'We\'re on the same team', type: 'core' },
                        { id: 'interpret', label: 'My interpretation of his tone might not be accurate', type: 'boundary' },
                        { id: 'overfunction', label: 'I don\'t need to over-apologize or over-explain', type: 'boundary' }
                    ],
                    responses: [
                        { 
                            id: 'overexplain', 
                            text: '"I\'m so sorry! I got distracted by work and then the kids called, and I completely‚Äî"',
                            pattern: 'Over-functioning - proving you\'re not bad',
                            outcome: 'Reinforces shame; makes it bigger than it needs to be'
                        },
                        { 
                            id: 'counter', 
                            text: '"Well, you could have called them yourself!"',
                            pattern: 'Defensive deflection - making it about fairness',
                            outcome: 'Creates conflict; misses the chance to just solve it together'
                        },
                        { 
                            id: 'simple', 
                            text: '"Oh shoot, I forgot. I\'ll call them right now."',
                            pattern: 'First principles response - simple ownership',
                            outcome: 'Addresses the actual problem; doesn\'t make it about your worth'
                        },
                        { 
                            id: 'curious', 
                            text: '"I did forget‚Äîcalling now. You sound stressed, everything okay?"',
                            pattern: 'First principles response - addressing both the task and connection',
                            outcome: 'Solves the problem and opens space for real communication'
                        }
                    ]
                }
            ];

            const currentScenarioData = scenarios[currentScenario];

            const handleEmotionSelect = (emotion) => {
                setSelectedEmotion(emotion);
                setGameStage('pause');
            };

            const handlePrincipleToggle = (principle) => {
                setSelectedPrinciples(prev => 
                    prev.find(p => p.id === principle.id)
                        ? prev.filter(p => p.id !== principle.id)
                        : [...prev, principle]
                );
            };

            const handleResponseSelect = (response) => {
                setSelectedResponse(response);
                
                const insight = {
                    emotion: selectedEmotion,
                    principles: selectedPrinciples,
                    response: response,
                    scenario: currentScenarioData.title
                };
                
                setInsights([...insights, insight]);
                setGameStage('reflection');
            };

            const nextScenario = () => {
                if (currentScenario < scenarios.length - 1) {
                    setCurrentScenario(currentScenario + 1);
                    setGameStage('scenario');
                    setSelectedEmotion(null);
                    setSelectedPrinciples([]);
                    setSelectedResponse(null);
                } else {
                    setGameStage('complete');
                }
            };

            const restart = () => {
                setCurrentScenario(0);
                setGameStage('scenario');
                setSelectedEmotion(null);
                setSelectedPrinciples([]);
                setSelectedResponse(null);
                setInsights([]);
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-rose-50 via-amber-50 to-purple-50 p-6">
                    <div className="max-w-3xl mx-auto">
                        <div className="text-center mb-8">
                            <div className="flex items-center justify-center gap-3 mb-3">
                                <Sparkles className="text-purple-600" size={32} />
                                <h1 className="text-3xl font-bold text-gray-800">Emotional Wisdom Practice</h1>
                            </div>
                            <p className="text-gray-600">Building the space between feeling and responding</p>
                            {gameStage !== 'complete' && (
                                <div className="mt-4 flex gap-2 justify-center">
                                    {scenarios.map((_, idx) => (
                                        <div 
                                            key={idx}
                                            className={`w-3 h-3 rounded-full ${
                                                idx === currentScenario ? 'bg-purple-600' : 
                                                idx < currentScenario ? 'bg-purple-300' : 'bg-gray-300'
                                            }`}
                                        />
                                    ))}
                                </div>
                            )}
                        </div>

                        {gameStage === 'scenario' && (
                            <div className="bg-white rounded-2xl shadow-lg p-8 mb-6">
                                <h2 className="text-2xl font-semibold text-gray-800 mb-4">
                                    {currentScenarioData.title}
                                </h2>
                                <p className="text-lg text-gray-700 leading-relaxed mb-6">
                                    {currentScenarioData.situation}
                                </p>
                                <button
                                    onClick={() => setGameStage('emotion')}
                                    className="w-full bg-purple-600 text-white py-3 rounded-lg font-medium hover:bg-purple-700 transition flex items-center justify-center gap-2"
                                >
                                    Explore This Moment <ArrowRight size={20} />
                                </button>
                            </div>
                        )}

                        {gameStage === 'emotion' && (
                            <div className="bg-white rounded-2xl shadow-lg p-8 mb-6">
                                <div className="flex items-center gap-3 mb-6">
                                    <Heart className="text-rose-600" size={28} />
                                    <h2 className="text-2xl font-semibold text-gray-800">What are you feeling?</h2>
                                </div>
                                <p className="text-gray-600 mb-6 italic">
                                    There's no wrong answer. Just notice what arises.
                                </p>
                                <div className="grid gap-3">
                                    {currentScenarioData.emotions.map(emotion => (
                                        <button
                                            key={emotion.id}
                                            onClick={() => handleEmotionSelect(emotion)}
                                            className="text-left p-4 rounded-lg border-2 border-gray-200 hover:border-rose-300 hover:bg-rose-50 transition"
                                        >
                                            <div className="font-semibold text-gray-800">{emotion.label}</div>
                                            <div className="text-sm text-gray-600 mt-1">{emotion.desc}</div>
                                        </button>
                                    ))}
                                </div>
                            </div>
                        )}

                        {gameStage === 'pause' && (
                            <div className="bg-white rounded-2xl shadow-lg p-8 mb-6">
                                <div className="text-center">
                                    <div className="w-20 h-20 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-6">
                                        <Heart className="text-purple-600" size={36} />
                                    </div>
                                    <h2 className="text-2xl font-semibold text-gray-800 mb-4">
                                        You're feeling: {selectedEmotion.label}
                                    </h2>
                                    <p className="text-gray-600 mb-2 italic">"{selectedEmotion.desc}"</p>
                                    <div className="bg-amber-50 border-l-4 border-amber-400 p-6 my-6 text-left">
                                        <p className="text-gray-700 leading-relaxed">
                                            <strong>Take a breath.</strong> This feeling is real and valid. And... it doesn't have to drive your response. You have time. There's space between this feeling and what you choose to do next.
                                        </p>
                                    </div>
                                    <button
                                        onClick={() => setGameStage('principles')}
                                        className="bg-purple-600 text-white px-8 py-3 rounded-lg font-medium hover:bg-purple-700 transition"
                                    >
                                        I'm Ready to Reflect
                                    </button>
                                </div>
                            </div>
                        )}

                        {gameStage === 'principles' && (
                            <div className="bg-white rounded-2xl shadow-lg p-8 mb-6">
                                <div className="flex items-center gap-3 mb-6">
                                    <Brain className="text-purple-600" size={28} />
                                    <h2 className="text-2xl font-semibold text-gray-800">What's true here?</h2>
                                </div>
                                <p className="text-gray-600 mb-6">
                                    Select the fundamental truths that resonate with you in this situation. These are your anchors.
                                </p>
                                <div className="grid gap-3 mb-6">
                                    {currentScenarioData.principles.map(principle => (
                                        <button
                                            key={principle.id}
                                            onClick={() => handlePrincipleToggle(principle)}
                                            className={`text-left p-4 rounded-lg border-2 transition ${
                                                selectedPrinciples.find(p => p.id === principle.id)
                                                    ? 'border-purple-500 bg-purple-50'
                                                    : 'border-gray-200 hover:border-purple-300'
                                            }`}
                                        >
                                            <div className="flex items-center gap-2">
                                                <div className={`w-5 h-5 rounded border-2 flex items-center justify-center ${
                                                    selectedPrinciples.find(p => p.id === principle.id)
                                                        ? 'bg-purple-600 border-purple-600'
                                                        : 'border-gray-300'
                                                }`}>
                                                    {selectedPrinciples.find(p => p.id === principle.id) && (
                                                        <div className="w-2 h-2 bg-white rounded-full" />
                                                    )}
                                                </div>
                                                <span className="font-medium text-gray-800">{principle.label}</span>
                                                <span className="text-xs text-gray-500 ml-auto">
                                                    {principle.type === 'core' ? 'üéØ Core truth' : 'üõ°Ô∏è Boundary'}
                                                </span>
                                            </div>
                                        </button>
                                    ))}
                                </div>
                                {selectedPrinciples.length > 0 && (
                                    <button
                                        onClick={() => setGameStage('response')}
                                        className="w-full bg-purple-600 text-white py-3 rounded-lg font-medium hover:bg-purple-700 transition flex items-center justify-center gap-2"
                                    >
                                        Choose Your Response <ArrowRight size={20} />
                                    </button>
                                )}
                            </div>
                        )}

                        {gameStage === 'response' && (
                            <div className="bg-white rounded-2xl shadow-lg p-8 mb-6">
                                <h2 className="text-2xl font-semibold text-gray-800 mb-6">
                                    How will you respond?
                                </h2>
                                <div className="grid gap-4">
                                    {currentScenarioData.responses.map(response => (
                                        <button
                                            key={response.id}
                                            onClick={() => handleResponseSelect(response)}
                                            className="text-left p-5 rounded-lg border-2 border-gray-200 hover:border-purple-300 hover:bg-purple-50 transition"
                                        >
                                            <div className="font-medium text-gray-800 mb-2">"{response.text}"</div>
                                            <div className="text-sm text-gray-600">
                                                <span className="font-semibold">Pattern:</span> {response.pattern}
                                            </div>
                                        </button>
                                    ))}
                                </div>
                            </div>
                        )}

                        {gameStage === 'reflection' && (
                            <div className="bg-white rounded-2xl shadow-lg p-8 mb-6">
                                <div className="flex items-center gap-3 mb-6">
                                    <Sparkles className="text-amber-600" size={28} />
                                    <h2 className="text-2xl font-semibold text-gray-800">Your Choice</h2>
                                </div>
                                
                                <div className="space-y-6">
                                    <div className="bg-rose-50 p-5 rounded-lg">
                                        <div className="text-sm text-rose-800 font-semibold mb-2">YOU FELT</div>
                                        <div className="text-gray-800">{selectedEmotion.label}: "{selectedEmotion.desc}"</div>
                                    </div>

                                    <div className="bg-purple-50 p-5 rounded-lg">
                                        <div className="text-sm text-purple-800 font-semibold mb-2">YOU ANCHORED TO</div>
                                        <div className="space-y-2">
                                            {selectedPrinciples.map(p => (
                                                <div key={p.id} className="text-gray-800">‚Ä¢ {p.label}</div>
                                            ))}
                                        </div>
                                    </div>

                                    <div className="bg-green-50 p-5 rounded-lg">
                                        <div className="text-sm text-green-800 font-semibold mb-2">YOU CHOSE</div>
                                        <div className="text-gray-800 mb-3">"{selectedResponse.text}"</div>
                                        <div className="text-sm text-gray-700">
                                            <strong>Pattern:</strong> {selectedResponse.pattern}
                                        </div>
                                        <div className="text-sm text-gray-700 mt-2">
                                            <strong>Likely outcome:</strong> {selectedResponse.outcome}
                                        </div>
                                    </div>

                                    <div className="bg-amber-50 border-l-4 border-amber-400 p-5">
                                        <p className="text-gray-700 italic">
                                            Notice: You just practiced creating space between your emotional reaction and your response. This is agency. This is choice. Every time you do this, you're strengthening a new pattern.
                                        </p>
                                    </div>

                                    <button
                                        onClick={nextScenario}
                                        className="w-full bg-purple-600 text-white py-3 rounded-lg font-medium hover:bg-purple-700 transition flex items-center justify-center gap-2"
                                    >
                                        {currentScenario < scenarios.length - 1 ? (
                                            <>Continue to Next Scenario <ArrowRight size={20} /></>
                                        ) : (
                                            <>See Your Patterns <ArrowRight size={20} /></>
                                        )}
                                    </button>
                                </div>
                            </div>
                        )}

                        {gameStage === 'complete' && (
                            <div className="bg-white rounded-2xl shadow-lg p-8">
                                <div className="text-center mb-8">
                                    <div className="w-20 h-20 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-6">
                                        <Sparkles className="text-purple-600" size={36} />
                                    </div>
                                    <h2 className="text-3xl font-semibold text-gray-800 mb-4">
                                        Beautiful Work
                                    </h2>
                                    <p className="text-gray-600 text-lg">
                                        You've just practiced something powerful: observing yourself with compassion while choosing how you respond.
                                    </p>
                                </div>

                                <div className="bg-purple-50 p-6 rounded-lg mb-8">
                                    <h3 className="font-semibold text-gray-800 mb-4 text-lg">Your Emotional Patterns</h3>
                                    <div className="space-y-4">
                                        {insights.map((insight, idx) => (
                                            <div key={idx} className="bg-white p-4 rounded-lg border border-purple-200">
                                                <div className="font-semibold text-gray-800 mb-2">{insight.scenario}</div>
                                                <div className="text-sm text-gray-600 space-y-1">
                                                    <div>Felt: <span className="font-medium">{insight.emotion.label}</span></div>
                                                    <div>Response type: <span className="font-medium">{insight.response.pattern}</span></div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                <div className="bg-amber-50 border-l-4 border-amber-400 p-6 mb-6">
                                    <h3 className="font-semibold text-gray-800 mb-3">Moving Forward</h3>
                                    <p className="text-gray-700 leading-relaxed">
                                        The goal isn't to never feel strong emotions. It's to recognize them, honor them, and then choose your response from a grounded place. You're not trying to be perfect‚Äîyou're practicing being aware. That awareness itself is transformation.
                                    </p>
                                </div>

                                <button
                                    onClick={restart}
                                    className="w-full bg-purple-600 text-white py-3 rounded-lg font-medium hover:bg-purple-700 transition flex items-center justify-center gap-2"
                                >
                                    <RotateCcw size={20} /> Practice Again
                                </button>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        ReactDOM.render(<EmotionalWisdomGame />, document.getElementById('root'));
    </script>
</body>
</html>
